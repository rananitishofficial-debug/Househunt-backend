<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Find House</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="relative">

  <!-- ğŸ”¥ Background Video -->
  <video autoplay muted loop class="fixed top-0 left-0 w-full h-full object-cover z-[-1]">
      <source src="https://cdn.coverr.co/videos/coverr-city-sunrise-4697/1080p.mp4" type="video/mp4">
  </video>

  <!-- Dark overlay -->
  <div class="fixed inset-0 bg-black bg-opacity-50 z-[-1]"></div>

  <!-- Main Container -->
  <div class="max-w-5xl mx-auto py-12">

    <h1 class="text-5xl font-extrabold text-white text-center mb-8">
        Find Your Dream House ğŸ¡
    </h1>

    <!-- Search Bar -->
    <div class="bg-white p-6 rounded-xl shadow-lg mb-10">
      <input id="searchInput"
             type="text"
             placeholder="Search by title, location or price..."
             class="w-full border p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" />
    </div>

    <!-- House Listings -->
    <div id="housesContainer" class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Houses will load here -->
    </div>

  </div>

  <script>
    async function loadHouses() {
      const response = await fetch("http://localhost:5000/api/properties");
      const houses = await response.json();

      const container = document.getElementById("housesContainer");
      container.innerHTML = "";

      houses.forEach(house => {
        const img = house.images[0] ? `http://localhost:5000${house.images[0]}` : "noimage.jpg";

        const houseCard = `
          <div class="bg-white bg-opacity-90 rounded-xl shadow-lg overflow-hidden">
            <img src="${img}" class="h-56 w-full object-cover">

            <div class="p-5">
              <h2 class="text-xl font-bold">${house.title}</h2>
              <p class="text-gray-600">ğŸ“ ${house.location}</p>
              <p class="text-lg font-semibold mt-3 text-green-600">â‚¹ ${house.price}</p>

              <div class="grid grid-cols-3 text-sm mt-4 text-gray-700">
                <p>ğŸ› ${house.bedrooms} Bed</p>
                <p>ğŸ› ${house.bathrooms} Bath</p>
                <p>ğŸ“ ${house.area} sqft</p>
              </div>

              <button class="mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg w-full">
                View Details
              </button>
            </div>
          </div>
        `;

        container.innerHTML += houseCard;
      });
    }

    // Load houses on page load
    loadHouses();

    // Search Filter
    document.getElementById("searchInput").addEventListener("input", function() {
      const keyword = this.value.toLowerCase();
      const cards = document.querySelectorAll("#housesContainer > div");

      cards.forEach(card => {
        const text = card.innerText.toLowerCase();
        card.style.display = text.includes(keyword) ? "block" : "none";
      });
    });
  </script>

</body>
</html>
